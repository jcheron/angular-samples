var prismController=function($scope,download,$rootScope,$location,$routeParams) {
	$scope.tabs={"ex1":{"code":"ex1","title":"Exercice 1 : <b>Note<\/b>","description":"Double data-binding, utilisation des directives de base","href":"ex1","tabs":[{"id":"1","caption":"HTML","file":"ex1-note\/index.html","href":"tab1","download":"1","comment":"<br>\r\n<div class='alert alert-warning'>Attention, pour pouvoir fonctionner correctement, cette application doit intégrer les librairies suivantes :\r\n<ul>\r\n<li>Twitter bootstrap css<\/li>\r\n<li>angularJS main file<\/li>\r\n<\/ul>\r\n\r\n<\/div>","exercice":{},"values":[]},{"id":"2","caption":"Javascript","file":"ex1-note\/noteController.js","href":"tab2","download":"1","comment":"","exercice":{},"values":[]},{"id":"6","caption":"Css","file":"ex1-note\/css.css","href":"tab3","download":"1","comment":"","exercice":{},"values":[]}],"values":[]},"ex2":{"code":"ex2","title":"Exercice 2 : <b>Sélection de services<\/b>","description":"Créer un module et un contrôleur, \r\nUtiliser des directives Angular, \r\nMettre en oeuvre le Data-binding","href":"ex2","tabs":[{"id":"3","caption":"HTML","file":"ex2-services\/index.html","href":"tab1","download":"1","comment":"","exercice":{},"values":[]},{"id":"4","caption":"Javascript","file":"ex2-services\/servicesController.js","href":"tab2","download":"1","comment":"","exercice":{},"values":[]},{"id":"5","caption":"Css","file":"ex2-services\/css.css","href":"tab3","download":"1","comment":"","exercice":{},"values":[]}],"values":[]},"ex3":{"code":"ex3","title":"Exercice 3 : <b>Choix multiples<\/b>","description":"Créer un module et un contrôleur\r\nUtiliser des directives Angular\r\nMettre en oeuvre le Data-binding","href":"ex3","tabs":[{"id":"7","caption":"HTML","file":"ex3-choixMultiples\/index.html","href":"tab1","download":"1","comment":"","exercice":{},"values":[]},{"id":"8","caption":"Javascript","file":"ex3-choixMultiples\/choixMultiplesController.js","href":"tab2","download":"1","comment":"","exercice":{},"values":[]},{"id":"9","caption":"Css","file":"ex3-choixMultiples\/css.css","href":"tab3","download":"1","comment":"","exercice":{},"values":[]}],"values":[]},"ex4":{"code":"ex4","title":"Exercice 4 : <b>Gestion des contacts<\/b>","description":"Utiliser la directive <b>ngRepeat<\/b><br>\r\nUtiliser la validation des formulaires<br>\r\nCréer des directives simples","href":"ex4","tabs":[{"id":"10","caption":"HTML","file":"ex4-contacts\/contact.html","href":"tab1","download":"1","comment":"","exercice":{},"values":[]},{"id":"11","caption":"Template ContactElem","file":"ex4-contacts\/templates\/v_contact.html","href":"tab2","download":"1","comment":"","exercice":{},"values":[]},{"id":"12","caption":"Template frmContactElem","file":"ex4-contacts\/templates\/v_frmContact.html","href":"tab3","download":"1","comment":"","exercice":{},"values":[]},{"id":"13","caption":"Directives","file":"ex4-contacts\/app\/contactsDirectives.js","href":"tab4","download":"1","comment":"","exercice":{},"values":[]},{"id":"14","caption":"Filtres","file":"ex4-contacts\/app\/contactsFilters.js","href":"tab5","download":"1","comment":"","exercice":{},"values":[]},{"id":"15","caption":"Contrôleur","file":"ex4-contacts\/app\/contactsControllers.js","href":"tab6","download":"1","comment":"","exercice":{},"values":[]}],"values":[]},"ex5":{"code":"ex5","title":"Exercice 5 : <b>Convertisseur de devises<\/b>","description":"Utiliser des services Angular existants (<b>$http<\/b>)<br>Mettre en oeuvre l'injection de dépendance<br>Créer des directives","href":"ex5","tabs":[{"id":"16","caption":"HTML","file":"ex5-currency\/index.html","href":"tab1","download":"1","comment":"<br>\r\n<div class='alert alert-warning'>Attention, pour pouvoir fonctionner correctement, cette application doit intégrer les librairies suivantes :\r\n<ul>\r\n<li>Twitter bootstrap css file<\/li>\r\n<li>angularJS main file<\/li>\r\n<li>abgularJS cookie file (angular-cookies.js)<\/li>\r\n<\/ul>\r\n\r\n<b><u>Ressources :<\/u><\/b>\r\n<ul>\r\n<li><a href='ex5-currency\/img\/loader.gif' target='_self'>img\/loader.gif<\/a><\/li>\r\n<li><a href='ex5-currency\/app\/data\/currencymap.json' target='_blank'>app\/data\/currencymap.json<\/a><\/li>\r\n<\/ul>\r\n\r\n<\/div>","exercice":{},"values":[]},{"id":"17","caption":"Template","file":"ex5-currency\/templates\/v_histo.html","href":"tab2","download":"1","comment":"","exercice":{},"values":[]},{"id":"20","caption":"Directives","file":"ex5-currency\/app\/currencyDirectives.js","href":"tab3","download":"1","comment":"","exercice":{},"values":[]},{"id":"21","caption":"Contrôleur","file":"ex5-currency\/app\/currencyControllers.js","href":"tab4","download":"1","comment":"","exercice":{},"values":[]}],"values":[]},"ex6":{"code":"ex6","title":"Exercice 6 : <b>Calculatrice<\/b>","description":"Créer un service (moteur de la calculatrice)<br>Utiliser un service (Injection de dépendance)<br>Créer des directives","href":"ex6","tabs":[{"id":"22","caption":"HTML","file":"ex6-calc\/index.html","href":"tab1","download":"1","comment":"<br>\r\n<div class='alert alert-warning'>Attention, pour pouvoir fonctionner correctement, cette application doit intégrer les librairies suivantes :\r\n<ul>\r\n<li>Twitter bootstrap css file<\/li>\r\n<li>angularJS main file<\/li>\r\n<li>abgularJS cookie file (angular-cookies.js)<\/li>\r\n<\/ul>\r\n\r\n<\/div>","exercice":{},"values":[]},{"id":"23","caption":"CSS","file":"ex6-calc\/css\/calc.css","href":"tab2","download":"1","comment":"","exercice":{},"values":[]},{"id":"24","caption":"Service","file":"ex6-calc\/app\/calcService.js","href":"tab3","download":"1","comment":"","exercice":{},"values":[]},{"id":"25","caption":"Directive","file":"ex6-calc\/app\/calcDirectives.js","href":"tab4","download":"1","comment":"","exercice":{},"values":[]},{"id":"26","caption":"Contrôleur","file":"ex6-calc\/app\/calcControllers.js","href":"tab5","download":"1","comment":"","exercice":{},"values":[]}],"values":[]},"ex7":{"code":"ex7","title":"Exercice 7 : <b>Boostrap Button<\/b>","description":"<ul>\r\n<li>Créer une directive avec template (dans une fonction)<\/li>\r\n<li>Définir le scope d'une directive<\/li>\r\n<li>Utiliser la transclusion<\/li>\r\n<li>Implémenter la méthode link<\/li>\r\n<li>Utiliser $observe<\/li>\r\n<\/ul>","href":"ex7","tabs":[{"id":"27","caption":"Directive","file":"directives\/button\/app\/buttonDirective.js","href":"tab1","download":"1","comment":"","exercice":{},"values":[]},{"id":"28","caption":"Template Button","file":"directives\/button\/app\/templates\/button.html","href":"tab2","download":"1","comment":"","exercice":{},"values":[]},{"id":"29","caption":"Template ButtonGlyph","file":"directives\/button\/app\/templates\/buttonGlyph.html","href":"tab3","download":"1","comment":"","exercice":{},"values":[]},{"id":"30","caption":"Vue de test","file":"directives\/button\/index.html","href":"tab4","download":"1","comment":"","exercice":{},"values":[]},{"id":"31","caption":"Application de test","file":"directives\/button\/app\/app.js","href":"tab5","download":"1","comment":"","exercice":{},"values":[]}],"values":[]},"ex8":{"code":"ex8","title":"Exercice 8 : <b>Boostrap Alert<\/b>","description":"<ul>\r\n<li>Créer une directive avec template<\/li>\r\n<li>Définir le scope d'une directive<\/li>\r\n<li>Utiliser la méthode link<\/li>\r\n<li>Traiter des événements sur le DOM <b>(close.bs.alert)<\/b><\/li>\r\n<li>Passer des méthodes dans le scope<\/li>\r\n<\/ul>","href":"ex8","tabs":[{"id":"32","caption":"Directive","file":"directives\/alert\/app\/alertDirective.js","href":"tab1","download":"1","comment":"","exercice":{},"values":[]},{"id":"33","caption":"Directive template","file":"directives\/alert\/app\/templates\/alert.html","href":"tab2","download":"1","comment":"","exercice":{},"values":[]},{"id":"34","caption":"Vue de test","file":"directives\/alert\/index.html","href":"tab3","download":"1","comment":"","exercice":{},"values":[]},{"id":"35","caption":"Application de test","file":"directives\/alert\/app\/app.js","href":"tab4","download":"1","comment":"","exercice":{},"values":[]}],"values":[]},"ex9":{"code":"ex9","title":"Exercice 9 : <b>Boostrap Progressbar<\/b>","description":"<ul>\r\n<li>Créer une directive avec template<\/li>\r\n<li>Définir le scope d'une directive<\/li>\r\n<li>Utiliser la méthode <b>link<\/b><\/li>\r\n<li>Observer les modifications sur <b>ngModel<\/b><\/li>\r\n<\/ul>","href":"ex9","tabs":[{"id":"36","caption":"Directive","file":"directives\/pb\/app\/pbDirective.js","href":"tab1","download":"1","comment":"","exercice":{},"values":[]},{"id":"37","caption":"Template","file":"directives\/pb\/app\/templates\/progressbar.html","href":"tab2","download":"1","comment":"","exercice":{},"values":[]},{"id":"38","caption":"Vue de test","file":"directives\/pb\/index.html","href":"tab3","download":"1","comment":"","exercice":{},"values":[]},{"id":"39","caption":"Application de test","file":"directives\/pb\/app\/app.js","href":"tab4","download":"1","comment":"","exercice":{},"values":[]}],"values":[]}};
	$scope.activeTabs=$scope.tabs[$routeParams.ex];
	
	$scope.downloadAll=function(tabs,ex){
		var zip = new JSZip();
		for(i in tabs){
			if(eval(tabs[i].download)==true){
				//download.downloadFile(tabs[i].file);
				zip.file(tabs[i].file,angular.element('<textarea />').html(tabs[i].content).text());
			}
		}
		var content = zip.generate({type:"arraybuffer"});
		download.downloadFile(ex+".zip",content);
	};

	$scope.isRunning=function(){
		return $location.path().indexOf("run")==-1 && $location.path().indexOf("ex")>-1;
	}
};
module.exports=prismController;